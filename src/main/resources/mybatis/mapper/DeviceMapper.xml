<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.ts.cpfr.dao.DeviceDao">
	<select id="selectDeviceList" parameterType="pd" resultType="pd">
		select * from tbl_#{wid}_device
    </select>

	<select id="selectInActDevice" parameterType="pd" resultType="pd">
		select device_sn,status,online,register_time,mac_grant_key from tbl_inactivated_device where device_sn=#{device_sn}
	</select>

	<insert id="insertInActDevice" parameterType="pd">
		insert into tbl_inactivated_device(device_sn,status,online,register_time) values(#{device_sn},0,0,now())
	</insert>

	<update id="updateInActDeviceMacGrantKeyAndStatus" parameterType="pd">
		UPDATE tbl_inactivated_device SET mac_grant_key = #{mac_grant_key},status=1,admin_id=#{admin_id},activate_time=now()  WHERE device_sn=#{device_sn}
	</update>

	<update id="updateInActDeviceOnline" parameterType="pd">
		UPDATE tbl_inactivated_device SET online = #{online}  WHERE device_sn=#{device_sn}
	</update>

	<update id="updateDeviceOnline" parameterType="pd">
		UPDATE tbl_#{wid}_device SET online = #{online}  WHERE device_sn=#{device_sn}
	</update>

	<select id="selectInActDeviceList" parameterType="pd" resultType="pd">
		select device_sn,online from tbl_inactivated_device where status=0
	</select>

	<insert id="insertDevice" parameterType="pd">
		INSERT INTO tbl_#{wid}_device (device_name,device_sn,mac_grant_key,device_ip_address,online) VALUES(#{device_sn},#{device_sn},#{mac_grant_key},#{device_ip_address},#{online})
	</insert>
</mapper>